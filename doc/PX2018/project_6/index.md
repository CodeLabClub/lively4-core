<lively-presentation tabindex="0"><div class="lively-slide" style="display: block;"> <!-- markdown-config presentation=true --> <!-- #TODO make style links in container content relative to url --> <!-- <link rel="stylesheet" type="text/css" href="style.css" /> --> <link rel="stylesheet" type="text/css" href="doc/PX2018/style.css"></link><link rel="stylesheet" type="text/css" href="src/client/lively.css"></link><link rel="stylesheet" type="text/css" href="templates/livelystyle.css"></link><style> .lively-slide { border: 1px solid rgb(220,220,220) page-break-before: always; /* border: 2px solid red */ } p { font-size: 18pt } @media print { .lively-slide { page-break-before: always; border: 0px solid white; /* border: 2px solid blue; */ } } </style> <div class="title">PX 2018: Graph Drawing</div> <div class="authors">Theresa Zobel, Siegfried Horschig</div> <div class="credentials">Software Architecture Group Hasso Plattner Institute University of Potsdam, Germany</div> <lively-script><script>var button = document.createElement("button") button.textContent = "print" button.onclick = async () => { var presentation = lively.query(this, "lively-presentation") presentation.print() } button.style = "position: absolute; bottom: 10px; left: 10px" button</script> </lively-script> ![](https://lively-kernel.org/lively4/lively4-jens/doc/PX2018/media/hpi_logo.png) <div class="page-number"></div> </div> <div class="lively-slide" style="display: none;"> # Abstract ![](https://lively-kernel.org/lively4/lively4-core/doc/PX2018/project_6/./img/standard-layout-1.gif) ![](https://lively-kernel.org/lively4/lively4-jens/doc/PX2018/media/hpi_logo.png) <div class="page-number"></div> </div> <div class="lively-slide" style="display: none;"> # Demo <div><svg width="900" height="500" id="svgContainer" style="border-style: solid"><g class="nodes"><circle r="10" cx="504.6702363960105" cy="224.1597547660516"></circle><title>1</title><circle r="10" cx="441.51370049050007" cy="302.68207250555514"></circle><title>2</title><circle r="10" cx="403.88576893763576" cy="223.1253175807241"></circle><title>3</title></g><g class="links"><line stroke-width="1" stroke="lightgray" x1="504.6702363960105" y1="224.1597547660516" x2="441.51370049050007" y2="302.68207250555514"></line><line stroke-width="1.4142135623730951" stroke="lightgray" x1="504.6702363960105" y1="224.1597547660516" x2="403.88576893763576" y2="223.1253175807241"></line></g></svg><button id="addNode">Add Node</button></div> <lively-script><script>import d3 from "src/external/d3.v5.js" var addNodeButton = lively.query(this, "#addNode"); addNodeButton.onclick = async () => { addNode(); } var svg = d3.select(lively.query(this, "#svgContainer")); var nodeId = 3; var graphJson = { "nodes": [ {"id": "1", "group": 1}, {"id": "2", "group": 2}, {"id": "3", "group": 3} ], "links": [ {"source": "1", "target": "2", "value": 1}, {"source": "1", "target": "3", "value": 2} ] } function getGraphJSON() { return graphJson; } function addNode() { nodeId++; var newNode = {"id": nodeId, "group": nodeId}; var newLink = {"source": "1", "target": nodeId, "value": 2}; graphJson["nodes"].push(newNode); graphJson["links"].push(newLink); console.log(graphJson); // restart(); } function restart() { console.log('restart'); } (async () => { var color = d3.scaleOrdinal(d3.schemeCategory20); var graph = getGraphJSON(), width = +svg.attr("width"), height = +svg.attr("height"); var simulation = d3.forceSimulation() .force("link", d3.forceLink().id(function(d) { return d.id; })) .force("charge", d3.forceManyBody()) .force("center", d3.forceCenter(width / 2, height / 2)); var node = svg.append("g") .attr("class", "nodes") .selectAll("circle") .data(graph.nodes) node.exit().remove(); node = node.enter().append("circle") .attr("r", 10) .attr("fill", function(d) { return color(d.group); }) .call(d3.drag() .on("start", dragstarted.bind(this, simulation)) .on("drag", dragged.bind(this, simulation)) .on("end", dragended.bind(this, simulation))) .merge(node); var link = svg.append("g") .attr("class", "links") .selectAll("line") .data(graph.links) link.exit().remove(); link = link.enter().append("line") .attr("stroke-width", function(d) { return Math.sqrt(d.value); }) .attr("stroke", "lightgray") .merge(link); node.append("title") .text(function(d) { return d.id; }); simulation .nodes(graph.nodes) .on("tick", ticked.bind(this, link, node)); simulation.force("link") .links(graph.links) .distance(100); simulation.alpha(1).restart(); })(); function ticked(link, node) { link .attr("x1", function(d) { return d.source.x; }) .attr("y1", function(d) { return d.source.y; }) .attr("x2", function(d) { return d.target.x; }) .attr("y2", function(d) { return d.target.y; }); node .attr("cx", function(d) { return d.x; }) .attr("cy", function(d) { return d.y; }); } function dragstarted(simulation, d) { if (!d3.event.active) simulation.alphaTarget(0.3).restart(); d.fx = d.x; d.fy = d.y; } function dragged(simulation, d) { d.fx = d3.event.x; d.fy = d3.event.y; } function dragended(simulation, d) { if (!d3.event.active) simulation.alphaTarget(0); d.fx = null; d.fy = null; }</script> </lively-script> ![](https://lively-kernel.org/lively4/lively4-jens/doc/PX2018/media/hpi_logo.png) <div class="page-number"></div> </div> <div class="lively-slide" style="display: none;"> <!-- #TODO pull this up into presentation? --> <lively-script><script>// poor men's slide master var presentation = lively.query(this, "lively-presentation") if (presentation && presentation.slides) { presentation.slides().forEach(ea => { var img = document.createElement("img") img.classList.add("logo") img.src="https://lively-kernel.org/lively4/lively4-jens/doc/PX2018/media/hpi_logo.png" img.setAttribute("width", "50px") ea.appendChild(img) var div = document.createElement("div") div.classList.add("page-number") ea.appendChild(div) }); } ""</script> </lively-script> ![](https://lively-kernel.org/lively4/lively4-jens/doc/PX2018/media/hpi_logo.png) <div class="page-number"></div> </div> </lively-presentation>