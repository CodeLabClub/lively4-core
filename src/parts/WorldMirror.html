<div class="lively-content" style="position: absolute; width: 216.8px; height: 23.6px; left: -542.2px; top: 694.4px; user-select: none; z-index: 1000;" draggable="false" id="WorldMirror" data-lively-part-name="WorldMirror" data-lively-id="16084f73-2f76-4fd4-a187-d77a6017a2c1"><script data-name="onDrag" type="lively4script">function onDrag(evt) {
  if(!this.isdragging) return
  lively.setPosition(this, this.dragOffset.addPt(lively.getPosition(evt)))
  this.ajustRootPosition()
  
}</script><script data-name="onDragStop" type="lively4script">function onDragStop(evt) {
  this.isdragging = false
  lively.removeEventListener('mirror-dragging', document.body.parentElement)
}</script><script data-name="onDragHandleStop" type="lively4script">function onDragHandleStop(evt) {
  this.isdragging = false
  lively.removeEventListener('mirror-dragging', document.body.parentElement)
  evt.stopPropagation()

}</script><script data-name="onDragHandleStart" type="lively4script">function onDragHandleStart(evt) {
  if(evt.altKey || evt.shiftKey) return 
  this.isdragging = true
  this.dragOffset = lively.getPosition(this.handle).subPt(lively.getPosition(evt))
  lively.addEventListener('mirror-dragging', document.body.parentElement,'pointermove', evt => this.onDragHandle(evt));
  lively.addEventListener('mirror-dragging', document.body.parentElement,'pointerup', evt => this.onDragHandleStop(evt));
  evt.stopPropagation()

}</script><script data-name="onDragHandle" type="lively4script">function onDragHandle(evt) {
  if(!this.isdragging) return
  lively.setPosition(this.handle, this.dragOffset.addPt(lively.getPosition(evt)))
  this.ajustRootPosition()
  evt.stopPropagation()
}</script><script data-name="ajustRootPosition" type="lively4script">function ajustRootPosition() {
  lively.setGlobalPosition(this.world, lively.getGlobalPosition(document.body))
  lively.setExtent(this.frame, lively.getPosition(this.handle))
  
}</script><script data-name="selectElement" type="lively4script">function selectElement(element) {
  
  lively.showHalo(element)
}</script><script data-name="onFilterChanged" type="lively4script">function onFilterChanged(filter) {
  try {
    this.filterFunc = eval(filter)
    this.input.style.border = "1px solid gray"
  } catch(err) {
    this.input.style.border = "2px solid red"
  }
  this.updateWorld()
}</script><script data-name="mirrorWorld" type="lively4script">function mirrorWorld() {
  this.style.zIndex = 1000
  this.style.overflow = ""
  this.style.userSelect = "none"
  
  if (!this.shadowRoot) {
    this.createShadowRoot()
  }
  this.style.border = ""
  
  this.shadowRoot.innerHTML = ""
  this.frame = document.createElement("div")
  this.frame.isMetaNode = true
  this.shadowRoot.appendChild(this.frame)
  //this.frame.style.pointerEvents = "none";
  this.frame.style.overflow = "hidden"
  lively.setExtent(this.frame, lively.pt(300,300))
  lively.setPosition(this.frame, lively.pt(0,0))
  this.style.background = ""
  
  // lively.removeEventListener('dragging', this)
  lively.addEventListener('dragging', this.frame, 'pointerdown', evt => this.onDragStart(evt));

  
  this.world = document.createElement("div")
  this.world.isMetaNode = true
  this.frame.appendChild(this.world)
  this.frame.style.background = "rgba(255,255,255,0.4)"
  
  // this.button = document.createElement("button")
  // this.button.textContent = "World Mirror"
  // this.button.isMetaNode = true
  // this.shadowRoot.appendChild(this.button)
  // lively.setPosition(this.button, pt(0,-30))
  // this.button.style.zIndex=  110000
  // this.button.addEventListener("click", () => {
  //   this.frame.innerHTML = ""
  //   this.mirrorWorld()
  // })
//   this.label = document.createElement("div")
//   this.label.isMetaNode = true
//   this.shadowRoot.appendChild(this.label)


  this.input = document.createElement("input")
  this.input.value = "ea => ea.localName.match(/-/)"
  this.input.isMetaNode = true
  this.input.style.width = "300px"
  this.shadowRoot.appendChild(this.input)
  lively.setPosition(this.input, lively.pt(0,-20))
  this.input.addEventListener("keyup", evt => {
      if (evt.keyCode == 13) { // ENTER
        this.onFilterChanged(this.input.value);
      }
    });
  // this.button.style.zIndex=  110000
  // this.button.addEventListener("click", () => {
  //   this.frame.innerHTML = ""
  //   this.mirrorWorld()
  // })
  
  
  this.handle = document.createElement("div")
  this.handle.isMetaNode = true
  this.handle.style.backgroundColor = "gray"
  lively.setExtent(this.handle, lively.pt(10,10))
  this.shadowRoot.appendChild(this.handle)
  lively.setPosition(this.handle, lively.pt(300,300))
  lively.addEventListener('dragging', this.handle, 'pointerdown', evt => this.onDragHandleStart(evt));
  
  this.ajustRootPosition()
  
  this.updateWorld()
}</script><script data-name="onDragStart" type="lively4script">function onDragStart(evt) {
  if(evt.altKey || evt.shiftKey || evt.ctrlKey) return 
  this.isdragging = true
  // this.updateWorld()
  this.dragOffset = lively.getPosition(this).subPt(lively.getPosition(evt))
  lively.addEventListener('mirror-dragging', document.body.parentElement,'pointermove', evt => this.onDrag(evt));
  lively.addEventListener('mirror-dragging', document.body.parentElement,'pointerup', evt => this.onDragStop(evt));

}</script><script data-name="updateWorld" type="lively4script">function updateWorld() {

  this.world.innerHTML = ""
  this.addElements(lively.allElements(true))
  this.startHierrachyObservation(document.body)
}</script><script data-name="removeElements" type="lively4script">function removeElements(elements) {
  if (!this.elementMap || !elements) return;
  
  elements.forEach(ea => {
    var mirrorElement = this.elementMap.get(ea)
    if (mirrorElement) mirrorElement.remove()
  })
}</script><script data-name="filterElements" type="lively4script">function filterElements(all) {
  // urn all
  if (!this.filterFunc) {
    this.filterFunc = ea => ea.tagName && ea.tagName.match(/-/)
  }
  
  return Array.from(all).filter(ea => ea && ea.tagName).filter(this.filterFunc).slice(0,2000)
 
}</script><script data-name="startHierrachyObservation" type="lively4script">function startHierrachyObservation(obj) {
  if (this.hierrachyObserver) {
    this.hierrachyObserver.disconnect()
  }
  this.hierrachyObserver = new MutationObserver((mutations) => {
    mutations.forEach((mutation) => {  
      if(mutation.type == "childList") {
        this.removeElements(mutation.removedNodes)
        this.addElements(mutation.addedNodes)
      }
    });
  })
  this.hierrachyObserver.observe(obj, { 
    subtree: true,
    childList: true,
  });
}</script><div style="position: absolute; left: 1496px; top: 277px;"><lively-window class="" tabindex="0" title="GitHub Sync" style="position: absolute; z-index: 100; width: 800px; height: 500px; color: rgb(0, 0, 0); font-family: sans-serif; font-size: medium; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: 400; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; text-decoration-style: initial; text-decoration-color: initial; left: -1247px; top: 671.6px;"><div class="window true" style="box-sizing: border-box; width: 800px; height: 500px; display: flex; flex-direction: column; background-color: rgb(241, 243, 244); box-shadow: rgba(0, 0, 0, 0.3) 2px 4px 4px 0px; border: 1px solid rgba(0, 0, 0, 0.3);"><div class="window-titlebar" style="box-sizing: border-box; touch-action: none; position: relative; display: flex; flex-grow: 0; height: 1.2em; width: 798px; border-width: 0px 0px 1px; border-top-style: initial; border-right-style: initial; border-left-style: initial; border-top-color: initial; border-right-color: initial; border-left-color: initial; border-image: initial; border-bottom-style: solid; border-bottom-color: rgb(233, 233, 233);"><div class="window-title" style="box-sizing: border-box; flex-grow: 1; font-weight: 600; padding-top: 0em; vertical-align: middle; cursor: move; overflow: hidden;"><span style="box-sizing: border-box; font-size: 0.8em; margin-left: 6px; color: rgb(71, 81, 91);">GitHub Sync</span></div><div class="window-controls" style="box-sizing: border-box; flex-grow: 0;"><span class="window-button window-min" title="collapse" style="box-sizing: border-box; display: inline-block; color: rgb(119, 119, 119); background-color: rgba(0, 0, 0, 0); width: 1.3rem; text-align: center; font-weight: 500; cursor: pointer; line-height: 1rem; font-size: 0.8em;"><i class="fa fa-window-minimize " aria-hidden="true" style="box-sizing: border-box; display: inline-block; font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; line-height: 1; font-family: FontAwesome; font-size: inherit; text-rendering: auto; -webkit-font-smoothing: antialiased; padding: 2px;"></i></span><span>&nbsp;</span><span class="window-button window-max" title="maximize" style="box-sizing: border-box; display: inline-block; color: rgb(119, 119, 119); background-color: rgba(0, 0, 0, 0); width: 1.3rem; text-align: center; font-weight: 500; cursor: pointer; line-height: 1rem; font-size: 0.8em;"><i class="fa fa-window-maximize " aria-hidden="true" style="box-sizing: border-box; display: inline-block; font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; line-height: 1; font-family: FontAwesome; font-size: inherit; text-rendering: auto; -webkit-font-smoothing: antialiased; padding: 2px;"></i></span><span>&nbsp;</span><span class="window-button window-close" title="close" style="box-sizing: border-box; display: inline-block; color: rgb(119, 119, 119); background-color: rgba(0, 0, 0, 0); width: 1.3rem; text-align: center; font-weight: 500; cursor: pointer; line-height: 1rem; font-size: 0.9em;"><i class="fa fa-close" aria-hidden="true" style="box-sizing: border-box; display: inline-block; font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; line-height: 1; font-family: FontAwesome; font-size: inherit; text-rendering: auto; -webkit-font-smoothing: antialiased; padding: 2px;"></i></span></div></div><div class="window-content" id="window-content" style="box-sizing: border-box; position: relative; width: auto; height: auto; margin: 0px; padding-top: 0px; flex: 1 1 0%; overflow: hidden; background-color: white;"><lively-sync style="position: absolute; height: 478.8px; width: 798px;"><div class="container" style="width: 798px; height: 478.8px; display: flex; flex-direction: column; padding: 0px; margin: 0px;"><p class="fill" style="padding-left: 5px; padding-right: 5px; margin-top: 5px; margin-bottom: 5px; display: flex; flex-direction: row;"><label class="medium" style="padding: 6px 3px 3px; font-size: 13px; color: rgb(85, 85, 85); width: 70px;">Username</label><input class="" id="gitusername" value="" disabled="" style="background: rgb(238, 238, 238); border: 0px; padding: 2px; border-radius: 2px; width: 40px; flex: 1 1 0%; margin: 2px; color: rgb(170, 170, 170);"><label class="small" style="padding: 6px 3px 3px; font-size: 13px; color: rgb(85, 85, 85); width: 40px;">Email</label><input class="" id="gitemail" value="" disabled="" style="background: rgb(238, 238, 238); border: 0px; padding: 2px; border-radius: 2px; width: 40px; flex: 1 1 0%; margin: 2px; color: rgb(170, 170, 170);"><button id="loginButton" style="padding: 4px; margin: 2px; border: 1px solid rgb(213, 213, 213); background: linear-gradient(rgb(252, 252, 252), rgb(238, 238, 238)); border-radius: 2px; font-size: 10pt; color: rgb(64, 64, 64); cursor: pointer; width: 60px;">logout</button></p><p class="fill" style="padding-left: 5px; padding-right: 5px; margin-top: 5px; margin-bottom: 5px; display: flex; flex-direction: row;"><label class="medium" style="padding: 6px 3px 3px; font-size: 13px; color: rgb(85, 85, 85); width: 70px;">Upstream</label><input class="persistent clone" id="gitrepositoryurl" value="https://github.com/LivelyKernel/lively4-core.git" disabled="" style="background: rgb(238, 238, 238); border: 0px; padding: 2px; border-radius: 2px; width: 300px; flex: 1 1 0%; margin: 2px; color: rgb(170, 170, 170);"><button class="clone" id="cloneButton" disabled="" style="padding: 4px; margin: 2px; border: 1px solid rgb(213, 213, 213); background: linear-gradient(rgb(254, 254, 254), rgb(252, 252, 252)); border-radius: 2px; font-size: 10pt; color: rgb(204, 204, 204); cursor: pointer; width: 60px;">clone</button></p><p class="fill" style="padding-left: 5px; padding-right: 5px; margin-top: 5px; margin-bottom: 5px; display: flex; flex-direction: row;"><label class="medium" style="padding: 6px 3px 3px; font-size: 13px; color: rgb(85, 85, 85); width: 70px;">Local Name</label><input class="branch" id="gitrepository" value="lively4-core" list="gitrepositories" style="background: rgb(238, 238, 238); border: 0px; padding: 2px; border-radius: 2px; width: 40px; flex: 1 1 0%; margin: 2px;"><label class="small" style="padding: 6px 3px 3px; font-size: 13px; color: rgb(85, 85, 85); width: 40px;">Branch</label><input class="persistent branch" id="gitrepositorybranch" value="" list="gitbranches" style="background: rgb(238, 238, 238); border: 0px; padding: 2px; border-radius: 2px; width: 40px; flex: 1 1 0%; margin: 2px;"><button class="repo" id="mergeButton" style="padding: 4px; margin: 2px; border: 1px solid rgb(213, 213, 213); background: rgb(250, 50, 50); border-radius: 2px; font-size: 10pt; color: rgb(64, 64, 64); cursor: pointer;">merge from branch</button><button class="repo" id="branchButton" style="padding: 4px; margin: 2px; border: 1px solid rgb(213, 213, 213); background: linear-gradient(rgb(252, 252, 252), rgb(238, 238, 238)); border-radius: 2px; font-size: 10pt; color: rgb(64, 64, 64); cursor: pointer; width: 60px;">switch</button></p><p class="fill" style="padding-left: 5px; padding-right: 5px; margin-top: 5px; margin-bottom: 5px; display: flex; flex-direction: row;"><label class="medium" style="padding: 6px 3px 3px; font-size: 13px; color: rgb(85, 85, 85); width: 70px;">Message</label><input class="repo" id="gitcommitmessage" value="" style="background: rgb(238, 238, 238); border: 0px; padding: 2px; border-radius: 2px; width: 40px; flex: 1 1 0%; margin: 2px;"><button class="repo" id="commitButton" style="padding: 4px; margin: 2px; border: 1px solid rgb(213, 213, 213); background: linear-gradient(rgb(252, 252, 252), rgb(238, 238, 238)); border-radius: 2px; font-size: 10pt; color: rgb(64, 64, 64); cursor: pointer; width: 60px;">commit</button></p><p style="padding-left: 5px; padding-right: 5px; margin-top: 5px; margin-bottom: 5px;"><button class="repo" id="syncButton" style="padding: 4px; margin: 2px; border: 1px solid rgb(213, 213, 213); background: linear-gradient(rgb(252, 252, 252), rgb(238, 238, 238)); border-radius: 2px; font-size: 10pt; color: rgb(64, 64, 64); cursor: pointer;">sync</button><span>&nbsp;</span><button class="repo" id="statusButton" style="padding: 4px; margin: 2px; border: 1px solid rgb(213, 213, 213); background: linear-gradient(rgb(252, 252, 252), rgb(238, 238, 238)); border-radius: 2px; font-size: 10pt; color: rgb(64, 64, 64); cursor: pointer;">status</button><span>&nbsp;</span><button class="repo" id="diffButton" style="padding: 4px; margin: 2px; border: 1px solid rgb(213, 213, 213); background: linear-gradient(rgb(252, 252, 252), rgb(238, 238, 238)); border-radius: 2px; font-size: 10pt; color: rgb(64, 64, 64); cursor: pointer;">diff</button><span>&nbsp;</span><button class="repo" id="squashButton" style="padding: 4px; margin: 2px; border: 1px solid rgb(213, 213, 213); background: linear-gradient(rgb(252, 252, 252), rgb(238, 238, 238)); border-radius: 2px; font-size: 10pt; color: rgb(64, 64, 64); cursor: pointer;">squash</button><span>&nbsp;</span><button class="repo" id="resolveButton" style="padding: 4px; margin: 2px; border: 1px solid rgb(213, 213, 213); background: linear-gradient(rgb(252, 252, 252), rgb(238, 238, 238)); border-radius: 2px; font-size: 10pt; color: rgb(64, 64, 64); cursor: pointer;">resolve</button><span>&nbsp;</span><button class="repo" id="changelogButton" style="padding: 4px; margin: 2px; border: 1px solid rgb(213, 213, 213); background: linear-gradient(rgb(252, 252, 252), rgb(238, 238, 238)); border-radius: 2px; font-size: 10pt; color: rgb(64, 64, 64); cursor: pointer;">log</button><span>&nbsp;</span><button class="repo" id="npmInstallButton" style="padding: 4px; margin: 2px; border: 1px solid rgb(213, 213, 213); background: linear-gradient(rgb(252, 252, 252), rgb(238, 238, 238)); border-radius: 2px; font-size: 10pt; color: rgb(64, 64, 64); cursor: pointer;">npm install</button><span>&nbsp;</span><button class="repo" id="npmTestButton" style="padding: 4px; margin: 2px; border: 1px solid rgb(213, 213, 213); background: linear-gradient(rgb(252, 252, 252), rgb(238, 238, 238)); border-radius: 2px; font-size: 10pt; color: rgb(64, 64, 64); cursor: pointer;">npm test</button><span>&nbsp;</span><button class="repo" id="deleteButton" style="padding: 4px; margin: 2px; border: 1px solid rgb(213, 213, 213); background: linear-gradient(rgb(252, 252, 252), rgb(238, 238, 238)); border-radius: 2px; font-size: 10pt; color: rgb(179, 54, 48); cursor: pointer;">delete</button><span>&nbsp;</span><label style="padding: 6px 3px 3px; font-size: 13px; color: rgb(85, 85, 85);"><input class="checkbox" type="checkbox" id="dryrun" style="background: rgb(238, 238, 238); border: 0px; padding: 0px; border-radius: 2px; width: 14px; flex: 1 1 0%; margin: 0px; height: 14px;"><span>&nbsp;</span>dry run</label><a id="imprint" href="browse://imprint.md" onclick="event.preventDefault(); fetch(this.href)" style="color: rgb(43, 84, 126); float: right; margin-right: 5px;">imprint</a><a id="travisLink" href="https://travis-ci.org/LivelyKernel/lively4-core" style="color: rgb(43, 84, 126); float: right; margin-right: 5px;"><img src="https://travis-ci.org/LivelyKernel/lively4-core.svg"></a></p><div id="logContainer" style="flex: 1 1 0%; width: 790px; overflow: auto; overscroll-behavior: contain contain; background-color: rgb(50, 50, 50);"><div id="log" mode="text/x-diff" style="height: 278.8px; white-space: pre; font-family: monospace; padding: 5px; color: white;">https://github.com/LivelyKernel/lively4-core.git
</div></div></div></lively-sync></div></div><lively-resizer draggable="true" style="position: absolute; width: 10px; height: 10px; right: 0px; bottom: 0px; color: rgba(1, 1, 1, 0); transition: color 150ms ease-in-out 0s; box-sizing: border-box;"><i class="fa fa-chevron-down" aria-hidden="true" style="position: absolute; right: -6px; bottom: -4px; font-size: inherit; cursor: se-resize; z-index: 100; transform: rotate(-45deg); width: 1.28571em; text-align: center; display: inline-block; font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; line-height: 1; font-family: FontAwesome; text-rendering: auto; -webkit-font-smoothing: antialiased;"></i></lively-resizer><div class="window-global" id="window-global" style="box-sizing: border-box; position: absolute; top: 0px; left: 0px;"></div></lively-window><lively-window class="" tabindex="0" title="lively.js" style="position: absolute; z-index: 105; width: 950px; height: 600px; color: rgb(0, 0, 0); font-family: sans-serif; font-size: medium; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: 400; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; text-decoration-style: initial; text-decoration-color: initial; left: -211.8px; top: 899px;"><div class="window true" style="box-sizing: border-box; width: 950px; height: 600px; display: flex; flex-direction: column; background-color: rgb(241, 243, 244); box-shadow: rgba(0, 0, 0, 0.3) 2px 4px 4px 0px; border: 1px solid rgba(0, 0, 0, 0.3);"><div class="window-titlebar" style="box-sizing: border-box; touch-action: none; position: relative; display: flex; flex-grow: 0; height: 1.2em; width: 948px; border-width: 0px 0px 1px; border-top-style: initial; border-right-style: initial; border-left-style: initial; border-top-color: initial; border-right-color: initial; border-left-color: initial; border-image: initial; border-bottom-style: solid; border-bottom-color: rgb(233, 233, 233);"><span class="window-button window-menu" title="open menu" style="box-sizing: border-box; display: inline-block; color: rgb(119, 119, 119); background-color: rgba(0, 0, 0, 0); width: 1.3rem; text-align: center; font-weight: 500; cursor: pointer; line-height: 1rem; font-size: 0.8em; padding-top: 2px;"><i class="fa fa-bars" aria-hidden="true" style="box-sizing: border-box; display: inline-block; font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; line-height: 1; font-family: FontAwesome; font-size: inherit; text-rendering: auto; -webkit-font-smoothing: antialiased; padding: 2px;"></i></span><div class="window-title" style="box-sizing: border-box; flex-grow: 1; font-weight: 600; padding-top: 0em; vertical-align: middle; cursor: move; overflow: hidden;"><span style="box-sizing: border-box; font-size: 0.8em; margin-left: 6px; color: rgb(71, 81, 91);">lively.js</span></div><div class="window-controls" style="box-sizing: border-box; flex-grow: 0;"><span class="window-button window-min" title="collapse" style="box-sizing: border-box; display: inline-block; color: rgb(119, 119, 119); background-color: rgba(0, 0, 0, 0); width: 1.3rem; text-align: center; font-weight: 500; cursor: pointer; line-height: 1rem; font-size: 0.8em;"><i class="fa fa-window-minimize " aria-hidden="true" style="box-sizing: border-box; display: inline-block; font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; line-height: 1; font-family: FontAwesome; font-size: inherit; text-rendering: auto; -webkit-font-smoothing: antialiased; padding: 2px;"></i></span><span>&nbsp;</span><span class="window-button window-max" title="maximize" style="box-sizing: border-box; display: inline-block; color: rgb(119, 119, 119); background-color: rgba(0, 0, 0, 0); width: 1.3rem; text-align: center; font-weight: 500; cursor: pointer; line-height: 1rem; font-size: 0.8em;"><i class="fa fa-window-maximize " aria-hidden="true" style="box-sizing: border-box; display: inline-block; font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; line-height: 1; font-family: FontAwesome; font-size: inherit; text-rendering: auto; -webkit-font-smoothing: antialiased; padding: 2px;"></i></span><span>&nbsp;</span><span class="window-button window-close" title="close" style="box-sizing: border-box; display: inline-block; color: rgb(119, 119, 119); background-color: rgba(0, 0, 0, 0); width: 1.3rem; text-align: center; font-weight: 500; cursor: pointer; line-height: 1rem; font-size: 0.9em;"><i class="fa fa-close" aria-hidden="true" style="box-sizing: border-box; display: inline-block; font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; line-height: 1; font-family: FontAwesome; font-size: inherit; text-rendering: auto; -webkit-font-smoothing: antialiased; padding: 2px;"></i></span></div></div><div class="window-content" id="window-content" style="box-sizing: border-box; position: relative; width: auto; height: auto; margin: 0px; padding-top: 0px; flex: 1 1 0%; overflow: hidden; background-color: white;"><lively-container tabindex="0" src="https://lively-kernel.org/lively4/lively4-jens/src/client/lively.js" leftpane-flex="" rightpane-flex="" mode="edit" style="height: 578.8px; width: 948px; display: flex; flex-direction: column; border-right: 1px solid rgb(213, 213, 213); position: absolute;"></lively-container></div></div><lively-resizer draggable="true" style="position: absolute; width: 10px; height: 10px; right: 0px; bottom: 0px; color: rgba(1, 1, 1, 0); transition: color 150ms ease-in-out 0s; box-sizing: border-box;"><i class="fa fa-chevron-down" aria-hidden="true" style="position: absolute; right: -6px; bottom: -4px; font-size: inherit; cursor: se-resize; z-index: 100; transform: rotate(-45deg); width: 1.28571em; text-align: center; display: inline-block; font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; line-height: 1; font-family: FontAwesome; text-rendering: auto; -webkit-font-smoothing: antialiased;"></i></lively-resizer><div class="window-global" id="window-global" style="box-sizing: border-box; position: absolute; top: 0px; left: 0px;"></div></lively-window><lively-window class="" tabindex="0" title="#WorldMirror <small>div</small>" style="position: absolute; z-index: 104; width: 889px; height: 523px; color: rgb(0, 0, 0); font-family: sans-serif; font-size: medium; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: 400; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; text-decoration-style: initial; text-decoration-color: initial; left: -73.6px; top: 632px;"><div class="window true" style="box-sizing: border-box; width: 889px; height: 523px; display: flex; flex-direction: column; background-color: rgb(119, 136, 153); box-shadow: rgba(0, 0, 0, 0.3) 2px 4px 4px 0px; border: 1px solid rgba(0, 0, 0, 0.3);"><div class="window-titlebar" style="box-sizing: border-box; touch-action: none; position: relative; display: flex; flex-grow: 0; height: 1.2em; width: 887px; border-width: 0px 0px 1px; border-top-style: initial; border-right-style: initial; border-left-style: initial; border-top-color: initial; border-right-color: initial; border-left-color: initial; border-image: initial; border-bottom-style: solid; border-bottom-color: rgba(0, 0, 0, 0);"><span class="window-button window-menu" title="open menu" style="box-sizing: border-box; display: inline-block; color: white; background-color: rgba(0, 0, 0, 0); width: 1.3rem; text-align: center; font-weight: 500; cursor: pointer; line-height: 1rem; font-size: 0.8em; padding-top: 2px;"><i class="fa fa-bars" aria-hidden="true" style="box-sizing: border-box; display: inline-block; font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; line-height: 1; font-family: FontAwesome; font-size: inherit; text-rendering: auto; -webkit-font-smoothing: antialiased; padding: 2px;"></i></span><div class="window-title" style="box-sizing: border-box; flex-grow: 1; font-weight: 600; padding-top: 0em; vertical-align: middle; cursor: move; overflow: hidden;"><span style="box-sizing: border-box; font-size: 0.8em; margin-left: 6px; color: rgb(241, 243, 244);">#WorldMirror <small>div</small></span></div><div class="window-controls" style="box-sizing: border-box; flex-grow: 0;"><span class="window-button window-min" title="collapse" style="box-sizing: border-box; display: inline-block; color: white; background-color: rgba(0, 0, 0, 0); width: 1.3rem; text-align: center; font-weight: 500; cursor: pointer; line-height: 1rem; font-size: 0.8em;"><i class="fa fa-window-minimize " aria-hidden="true" style="box-sizing: border-box; display: inline-block; font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; line-height: 1; font-family: FontAwesome; font-size: inherit; text-rendering: auto; -webkit-font-smoothing: antialiased; padding: 2px;"></i></span><span>&nbsp;</span><span class="window-button window-max" title="maximize" style="box-sizing: border-box; display: inline-block; color: white; background-color: rgba(0, 0, 0, 0); width: 1.3rem; text-align: center; font-weight: 500; cursor: pointer; line-height: 1rem; font-size: 0.8em;"><i class="fa fa-window-maximize " aria-hidden="true" style="box-sizing: border-box; display: inline-block; font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; line-height: 1; font-family: FontAwesome; font-size: inherit; text-rendering: auto; -webkit-font-smoothing: antialiased; padding: 2px;"></i></span><span>&nbsp;</span><span class="window-button window-close" title="close" style="box-sizing: border-box; display: inline-block; color: white; background-color: rgba(0, 0, 0, 0); width: 1.3rem; text-align: center; font-weight: 500; cursor: pointer; line-height: 1rem; font-size: 0.9em;"><i class="fa fa-close" aria-hidden="true" style="box-sizing: border-box; display: inline-block; font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; line-height: 1; font-family: FontAwesome; font-size: inherit; text-rendering: auto; -webkit-font-smoothing: antialiased; padding: 2px;"></i></span></div></div><div class="window-content" id="window-content" style="box-sizing: border-box; position: relative; width: auto; height: auto; margin: 0px; padding-top: 0px; flex: 1 1 0%; overflow: hidden; background-color: white;"><lively-object-editor target="$e2347928-ed1b-4f4d-9a9e-d8f047cbbdb0" style="display: block; position: absolute; background: white; width: 887px; height: 501.8px;"><div class="main-content" style="width: 887px; height: 501.8px; display: flex; max-height: 100%; padding: 5px; box-sizing: border-box;"><div id="scriptsContent" class="script-wrapper" title="Scripts" style="display: flex; flex: 1 1 0%; flex-direction: column; margin-top: 8px; overflow: hidden;"><div class="content-top" style="display: flex; flex: 1 1 0%;"><lively-treeview id="property-list" style="box-sizing: border-box; border: 1px solid rgb(153, 153, 153); flex: 0.2 1 0%;"><ul id="script-nodes" style="margin: 0px; padding: 0px; list-style: none; width: 193.85px; font-size: inherit;"><li class="leaf" data-script-name="onDrag" style="position: relative; font-size: inherit; padding: 2px 0px 2px 8px; vertical-align: middle; line-height: 1rem; color: rgb(51, 51, 51); user-select: none; cursor: pointer;">onDrag</li><li class="leaf" data-script-name="onDragStop" style="position: relative; font-size: inherit; padding: 2px 0px 2px 8px; vertical-align: middle; line-height: 1rem; color: rgb(51, 51, 51); user-select: none; cursor: pointer;">onDragStop</li><li class="leaf" data-script-name="onDragHandleStop" style="position: relative; font-size: inherit; padding: 2px 0px 2px 8px; vertical-align: middle; line-height: 1rem; color: rgb(51, 51, 51); user-select: none; cursor: pointer;">onDragHandleStop</li><li class="leaf" data-script-name="onDragHandleStart" style="position: relative; font-size: inherit; padding: 2px 0px 2px 8px; vertical-align: middle; line-height: 1rem; color: rgb(51, 51, 51); user-select: none; cursor: pointer;">onDragHandleStart</li><li class="leaf" data-script-name="onDragHandle" style="position: relative; font-size: inherit; padding: 2px 0px 2px 8px; vertical-align: middle; line-height: 1rem; color: rgb(51, 51, 51); user-select: none; cursor: pointer;">onDragHandle</li><li class="leaf" data-script-name="ajustRootPosition" style="position: relative; font-size: inherit; padding: 2px 0px 2px 8px; vertical-align: middle; line-height: 1rem; color: rgb(51, 51, 51); user-select: none; cursor: pointer;">ajustRootPosition</li><li class="leaf" data-script-name="selectElement" style="position: relative; font-size: inherit; padding: 2px 0px 2px 8px; vertical-align: middle; line-height: 1rem; color: rgb(51, 51, 51); user-select: none; cursor: pointer;">selectElement</li><li class="leaf" data-script-name="onFilterChanged" style="position: relative; font-size: inherit; padding: 2px 0px 2px 8px; vertical-align: middle; line-height: 1rem; color: rgb(51, 51, 51); user-select: none; cursor: pointer;">onFilterChanged</li><li class="leaf" data-script-name="mirrorWorld" style="position: relative; font-size: inherit; padding: 2px 0px 2px 8px; vertical-align: middle; line-height: 1rem; color: rgb(51, 51, 51); user-select: none; cursor: pointer;">mirrorWorld</li><li class="leaf" data-script-name="onDragStart" style="position: relative; font-size: inherit; padding: 2px 0px 2px 8px; vertical-align: middle; line-height: 1rem; color: rgb(51, 51, 51); user-select: none; cursor: pointer;">onDragStart</li><li class="leaf" data-script-name="updateWorld" style="position: relative; font-size: inherit; padding: 2px 0px 2px 8px; vertical-align: middle; line-height: 1rem; color: rgb(51, 51, 51); user-select: none; cursor: pointer;">updateWorld</li><li class="leaf" data-script-name="removeElements" style="position: relative; font-size: inherit; padding: 2px 0px 2px 8px; vertical-align: middle; line-height: 1rem; color: rgb(51, 51, 51); user-select: none; cursor: pointer;">removeElements</li><li class="leaf" data-script-name="filterElements" style="position: relative; font-size: inherit; padding: 2px 0px 2px 8px; vertical-align: middle; line-height: 1rem; color: rgb(51, 51, 51); user-select: none; cursor: pointer;">filterElements</li><li class="leaf" data-script-name="startHierrachyObservation" style="position: relative; font-size: inherit; padding: 2px 0px 2px 8px; vertical-align: middle; line-height: 1rem; color: rgb(51, 51, 51); user-select: none; cursor: pointer;">startHierrachyObservation</li><li class="leaf" data-script-name="livelyLoad" style="position: relative; font-size: inherit; padding: 2px 0px 2px 8px; vertical-align: middle; line-height: 1rem; color: rgb(51, 51, 51); user-select: none; cursor: pointer;">livelyLoad</li><li class="leaf active" data-script-name="addElements" style="position: relative; font-size: inherit; padding: 2px 0px 2px 8px; vertical-align: middle; line-height: 1rem; color: rgb(240, 240, 240); user-select: none; cursor: pointer; font-weight: bold; background: gray;">addElements</li></ul></lively-treeview><lively-code-mirror id="editor" style="display: block; position: relative; font-size: 0px; flex: 0.8 1 0%;">1function addElements(elements) {2  if (!elements) return;3  4  var all = this.filterElements(elements)5  6  if (!this.elementMap) {7    this.elementMap = new WeakMap()8  }9  10  // this.label.innerHTML = " on " + all.size + " elements "11  all.forEach(ea =&gt; {12    if (ea === this || ea.isMetaNode) {13      return14    }15    16    var mirrorElement = this.elementMap.get(ea)17    18    if (!mirrorElement) {19      mirrorElement = document.createElement("div")20      mirrorElement.isMetaNode = true21      mirrorElement.style.border = "1px solid gray"22      mirrorElement.style.background = "rgba(0,100,0,0.3)"23      mirrorElement.style.display = "flex";24      mirrorElement.style.alignItems = "center";25      mirrorElement.style.justifyContent ="center";26      mirrorElement.target = ea27    28      if (all.length &amp;lt; 200) {29        mirrorElement.innerHTML = "&lt;div&gt;" + ea.localName + "&lt;/div&gt;"30        mirrorElement.style.color = "white"31        mirrorElement.style.textAlign = "center"32      }33​34      mirrorElement.updatePosition = function() {35        var bounds = lively.getGlobalBounds(ea)36        lively.setGlobalPosition(mirrorElement, bounds.topLeft())37        lively.setExtent(mirrorElement, bounds.extent())      38      }39      mirrorElement.addEventListener("click", () =&gt; this.selectElement(ea))40      this.elementMap.set(ea, mirrorElement)41    }    42    // lively.removeEventListener("x-ray", ea)    43    // lively.addEventListener("x-ray", ea, "context-style-changed", evt =&gt; {44    //   mirrorElement.updatePosition()45    // })46    lively.html.addContextStyleChangeListener(ea, mirrorElement.updatePosition)47    // #TODO call removeContextStyleChangeListener(obj, cb) 48    49    50    // mirrorElement.style.pointerEvents = "none";51    this.world.appendChild(mirrorElement)52    mirrorElement.updatePosition()53  })54  55}</lively-code-mirror></div><div class="toolbar" style="margin-top: 0.4rem; flex: 0 1 0%;"><div class="bar-left" style="display: inline-block; text-align: left;"><button id="add-script" style="padding: 4px; margin: 2px; border: 1px solid rgb(213, 213, 213); background: linear-gradient(rgb(252, 252, 252), rgb(238, 238, 238)); border-radius: 2px; font-size: 10pt; color: rgb(64, 64, 64); cursor: pointer;">Add</button><span>&nbsp;</span><button id="remove-script" style="padding: 4px; margin: 2px; border: 1px solid rgb(213, 213, 213); background: linear-gradient(rgb(252, 252, 252), rgb(238, 238, 238)); border-radius: 2px; font-size: 10pt; color: rgb(64, 64, 64); cursor: pointer;">Remove</button></div><div class="bar-right" style="float: right; display: inline-block; text-align: right;"><button id="run-script" style="padding: 4px; margin: 2px; border: 1px solid rgb(213, 213, 213); background: linear-gradient(rgb(252, 252, 252), rgb(238, 238, 238)); border-radius: 2px; font-size: 10pt; color: rgb(64, 64, 64); cursor: pointer;">Run</button><span>&nbsp;</span><button id="save-script" style="padding: 4px; margin: 2px; border: 1px solid rgb(213, 213, 213); background: linear-gradient(rgb(252, 252, 252), rgb(238, 238, 238)); border-radius: 2px; font-size: 10pt; color: rgb(64, 64, 64); cursor: pointer;">Save</button></div></div></div></div></lively-object-editor></div></div><lively-resizer draggable="true" style="position: absolute; width: 10px; height: 10px; right: 0px; bottom: 0px; color: rgba(1, 1, 1, 0); transition: color 150ms ease-in-out 0s; box-sizing: border-box;"><i class="fa fa-chevron-down" aria-hidden="true" style="position: absolute; right: -6px; bottom: -4px; font-size: inherit; cursor: se-resize; z-index: 100; transform: rotate(-45deg); width: 1.28571em; text-align: center; display: inline-block; font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; line-height: 1; font-family: FontAwesome; text-rendering: auto; -webkit-font-smoothing: antialiased;"></i></lively-resizer><div class="window-global" id="window-global" style="box-sizing: border-box; position: absolute; top: 0px; left: 0px;"></div></lively-window><div id="mutationIndicator" style="color: rgb(0, 0, 0); font-family: sans-serif; font-size: medium; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: 400; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; text-decoration-style: initial; text-decoration-color: initial; position: fixed; right: 0px; top: 0px; width: 10px; height: 10px; background-color: rgba(200, 0, 0, 0.5); pointer-events: none; z-index: 2000;"></div><lively-window class="" tabindex="0" title="html.js" style="position: absolute; z-index: 106; width: 1123px; height: 813px; color: rgb(0, 0, 0); font-family: sans-serif; font-size: medium; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: 400; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; text-decoration-style: initial; text-decoration-color: initial; left: -549.325px; top: 925.05px;"><div class="window true" style="box-sizing: border-box; width: 1123px; height: 813px; display: flex; flex-direction: column; background-color: rgb(241, 243, 244); box-shadow: rgba(0, 0, 0, 0.3) 2px 4px 4px 0px; border: 1px solid rgba(0, 0, 0, 0.3);"><div class="window-titlebar" style="box-sizing: border-box; touch-action: none; position: relative; display: flex; flex-grow: 0; height: 1.2em; width: 1121px; border-width: 0px 0px 1px; border-top-style: initial; border-right-style: initial; border-left-style: initial; border-top-color: initial; border-right-color: initial; border-left-color: initial; border-image: initial; border-bottom-style: solid; border-bottom-color: rgb(233, 233, 233);"><span class="window-button window-menu" title="open menu" style="box-sizing: border-box; display: inline-block; color: rgb(119, 119, 119); background-color: rgba(0, 0, 0, 0); width: 1.3rem; text-align: center; font-weight: 500; cursor: pointer; line-height: 1rem; font-size: 0.8em; padding-top: 2px;"><i class="fa fa-bars" aria-hidden="true" style="box-sizing: border-box; display: inline-block; font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; line-height: 1; font-family: FontAwesome; font-size: inherit; text-rendering: auto; -webkit-font-smoothing: antialiased; padding: 2px;"></i></span><div class="window-title" style="box-sizing: border-box; flex-grow: 1; font-weight: 600; padding-top: 0em; vertical-align: middle; cursor: move; overflow: hidden;"><span style="box-sizing: border-box; font-size: 0.8em; margin-left: 6px; color: rgb(71, 81, 91);">html.js</span></div><div class="window-controls" style="box-sizing: border-box; flex-grow: 0;"><span class="window-button window-min" title="collapse" style="box-sizing: border-box; display: inline-block; color: rgb(119, 119, 119); background-color: rgba(0, 0, 0, 0); width: 1.3rem; text-align: center; font-weight: 500; cursor: pointer; line-height: 1rem; font-size: 0.8em;"><i class="fa fa-window-minimize " aria-hidden="true" style="box-sizing: border-box; display: inline-block; font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; line-height: 1; font-family: FontAwesome; font-size: inherit; text-rendering: auto; -webkit-font-smoothing: antialiased; padding: 2px;"></i></span><span>&nbsp;</span><span class="window-button window-max" title="maximize" style="box-sizing: border-box; display: inline-block; color: rgb(119, 119, 119); background-color: rgba(0, 0, 0, 0); width: 1.3rem; text-align: center; font-weight: 500; cursor: pointer; line-height: 1rem; font-size: 0.8em;"><i class="fa fa-window-maximize " aria-hidden="true" style="box-sizing: border-box; display: inline-block; font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; line-height: 1; font-family: FontAwesome; font-size: inherit; text-rendering: auto; -webkit-font-smoothing: antialiased; padding: 2px;"></i></span><span>&nbsp;</span><span class="window-button window-close" title="close" style="box-sizing: border-box; display: inline-block; color: rgb(119, 119, 119); background-color: rgba(0, 0, 0, 0); width: 1.3rem; text-align: center; font-weight: 500; cursor: pointer; line-height: 1rem; font-size: 0.9em;"><i class="fa fa-close" aria-hidden="true" style="box-sizing: border-box; display: inline-block; font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; line-height: 1; font-family: FontAwesome; font-size: inherit; text-rendering: auto; -webkit-font-smoothing: antialiased; padding: 2px;"></i></span></div></div><div class="window-content" id="window-content" style="box-sizing: border-box; position: relative; width: auto; height: auto; margin: 0px; padding-top: 0px; flex: 1 1 0%; overflow: hidden; background-color: white;"><lively-container tabindex="0" src="https://lively-kernel.org/lively4/lively4-jens/src/client/html.js" leftpane-flex="" rightpane-flex="" mode="edit" style="height: 791.8px; width: 1121px; display: flex; flex-direction: column; border-right: 1px solid rgb(213, 213, 213); position: absolute;"></lively-container></div></div><lively-resizer draggable="true" style="position: absolute; width: 10px; height: 10px; right: 0px; bottom: 0px; color: rgba(1, 1, 1, 0); transition: color 150ms ease-in-out 0s; box-sizing: border-box;"><i class="fa fa-chevron-down" aria-hidden="true" style="position: absolute; right: -6px; bottom: -4px; font-size: inherit; cursor: se-resize; z-index: 100; transform: rotate(-45deg); width: 1.28571em; text-align: center; display: inline-block; font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; line-height: 1; font-family: FontAwesome; text-rendering: auto; -webkit-font-smoothing: antialiased;"></i></lively-resizer><div class="window-global" id="window-global" style="box-sizing: border-box; position: absolute; top: 0px; left: 0px;"></div></lively-window><lively-window class="" tabindex="0" title="Workspace" style="position: absolute; z-index: 103; width: 650px; height: 400px; color: rgb(0, 0, 0); font-family: sans-serif; font-size: medium; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: 400; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; text-decoration-style: initial; text-decoration-color: initial; left: -1263.25px; top: 810.52px;"><div class="window true" style="box-sizing: border-box; width: 650px; height: 400px; display: flex; flex-direction: column; background-color: rgb(241, 243, 244); box-shadow: rgba(0, 0, 0, 0.3) 2px 4px 4px 0px; border: 1px solid rgba(0, 0, 0, 0.3);"><div class="window-titlebar" style="box-sizing: border-box; touch-action: none; position: relative; display: flex; flex-grow: 0; height: 1.2em; width: 648px; border-width: 0px 0px 1px; border-top-style: initial; border-right-style: initial; border-left-style: initial; border-top-color: initial; border-right-color: initial; border-left-color: initial; border-image: initial; border-bottom-style: solid; border-bottom-color: rgb(233, 233, 233);"><span class="window-button window-menu" title="open menu" style="box-sizing: border-box; display: inline-block; color: rgb(119, 119, 119); background-color: rgba(0, 0, 0, 0); width: 1.3rem; text-align: center; font-weight: 500; cursor: pointer; line-height: 1rem; font-size: 0.8em; padding-top: 2px;"><i class="fa fa-bars" aria-hidden="true" style="box-sizing: border-box; display: inline-block; font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; line-height: 1; font-family: FontAwesome; font-size: inherit; text-rendering: auto; -webkit-font-smoothing: antialiased; padding: 2px;"></i></span><div class="window-title" style="box-sizing: border-box; flex-grow: 1; font-weight: 600; padding-top: 0em; vertical-align: middle; cursor: move; overflow: hidden;"><span style="box-sizing: border-box; font-size: 0.8em; margin-left: 6px; color: rgb(71, 81, 91);">Workspace</span></div><div class="window-controls" style="box-sizing: border-box; flex-grow: 0;"><span class="window-button window-min" title="collapse" style="box-sizing: border-box; display: inline-block; color: rgb(119, 119, 119); background-color: rgba(0, 0, 0, 0); width: 1.3rem; text-align: center; font-weight: 500; cursor: pointer; line-height: 1rem; font-size: 0.8em;"><i class="fa fa-window-minimize " aria-hidden="true" style="box-sizing: border-box; display: inline-block; font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; line-height: 1; font-family: FontAwesome; font-size: inherit; text-rendering: auto; -webkit-font-smoothing: antialiased; padding: 2px;"></i></span><span>&nbsp;</span><span class="window-button window-max" title="maximize" style="box-sizing: border-box; display: inline-block; color: rgb(119, 119, 119); background-color: rgba(0, 0, 0, 0); width: 1.3rem; text-align: center; font-weight: 500; cursor: pointer; line-height: 1rem; font-size: 0.8em;"><i class="fa fa-window-maximize " aria-hidden="true" style="box-sizing: border-box; display: inline-block; font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; line-height: 1; font-family: FontAwesome; font-size: inherit; text-rendering: auto; -webkit-font-smoothing: antialiased; padding: 2px;"></i></span><span>&nbsp;</span><span class="window-button window-close" title="close" style="box-sizing: border-box; display: inline-block; color: rgb(119, 119, 119); background-color: rgba(0, 0, 0, 0); width: 1.3rem; text-align: center; font-weight: 500; cursor: pointer; line-height: 1rem; font-size: 0.9em;"><i class="fa fa-close" aria-hidden="true" style="box-sizing: border-box; display: inline-block; font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; line-height: 1; font-family: FontAwesome; font-size: inherit; text-rendering: auto; -webkit-font-smoothing: antialiased; padding: 2px;"></i></span></div></div><div class="window-content" id="window-content" style="box-sizing: border-box; position: relative; width: auto; height: auto; margin: 0px; padding-top: 0px; flex: 1 1 0%; overflow: hidden; background-color: white;"><lively-code-mirror mode="text/jsx" overscroll="contain" style="display: block; position: absolute; font-size: 0px; height: 378.8px; width: 648px;">1lively.time(() =&gt;{2  lively.allElements(true)3})4​5    import html from "https://lively-kernel.org/lively4/lively4-jens/src/client/html.js"6    html.registerContextStyleObserver(document.body)7​8    html.registerContextStyleObserver(document.body).then(o =&gt; {9      o.disconnect()10    })11​12​13lively.html.registerConextStyleCallback(that, () =&gt; {14  console.log("moved " + that)15})lively.time(() =&gt;{ lively.allElements(true) }) import html from "https://lively-kernel.org/lively4/lively4-jens/src/client/html.js" html.registerContextStyleObserver(document.body) html.registerContextStyleObserver(document.body).then(o =&gt; { o.disconnect() }) lively.html.registerConextStyleCallback(that, () =&gt; { console.log("moved " + that) })</lively-code-mirror></div></div><lively-resizer draggable="true" style="position: absolute; width: 10px; height: 10px; right: 0px; bottom: 0px; color: rgba(1, 1, 1, 0); transition: color 150ms ease-in-out 0s; box-sizing: border-box;"><i class="fa fa-chevron-down" aria-hidden="true" style="position: absolute; right: -6px; bottom: -4px; font-size: inherit; cursor: se-resize; z-index: 100; transform: rotate(-45deg); width: 1.28571em; text-align: center; display: inline-block; font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; line-height: 1; font-family: FontAwesome; text-rendering: auto; -webkit-font-smoothing: antialiased;"></i></lively-resizer><div class="window-global" id="window-global" style="box-sizing: border-box; position: absolute; top: 0px; left: 0px;"></div></lively-window><div class="lively-content" id="quicklinks" data-lively-part-name="quicklinks" data-darkreader-inline-bgcolor="" data-darkreader-inline-border-top="" data-darkreader-inline-border-right="" data-darkreader-inline-border-bottom="" data-darkreader-inline-border-left="" style="color: rgb(0, 0, 0); font-family: sans-serif; font-size: medium; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: 400; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; text-decoration-style: initial; text-decoration-color: initial; background-color: rgba(200, 200, 0, 0.3); border: 20px none transparent; position: fixed; width: 156.15px; height: 371.9px; z-index: 1000; padding: 10px; left: -176.15px; top: 0px; --darkreader-inline-border-left:transparent;"><button class="lively-content" data-lively-part-name="button" contenteditable="null" style="position: absolute; left: 8px; top: 346px;">sort</button><button class="lively-content" data-lively-part-name="button" contenteditable="null" style="position: absolute; left: 173px; top: -3px; width: 27px; height: 25px;">◀</button><div class="lively-content" style="position: static; left: 114px; top: 208px;"><a href="http://localhost:9005/Dropbox/" style="color: rgb(43, 84, 126);">Dropbox</a></div><div class="lively-content" style="position: static; left: 60px; top: 146px;"><a href="https://lively-kernel.org/lively4/lively4-jens/src/client/contextmenu.js" style="color: rgb(43, 84, 126);">contextmenu.js</a></div><div class="lively-content" style="position: static; left: 17px; top: 29px;"><a href="https://lively-kernel.org/lively4/lively4-jens/src/client/draganddrop.js" style="color: rgb(43, 84, 126);">draganddrop.js</a></div><div class="lively-content" style="position: static; left: 122px; top: 150px;"><a href="https://lively-kernel.org/lively4/lively4-jens/doc/manual/hooks.md" style="color: rgb(43, 84, 126);">hooks.md</a></div><div class="lively-content" style="position: static; left: 75px; top: 151px;"><a href="https://lively-kernel.org/lively4/overleaf-cop18-promises/content/implementation.md" style="color: rgb(43, 84, 126);">implementation.md</a></div><div class="lively-content" style="position: static; left: 14px; top: 104px;"><a href="https://lively-kernel.org/lively4/lively4-jens/src/client/lively.js" style="color: rgb(43, 84, 126);">lively.js</a></div><div class="lively-content" style="position: static; left: 51px; top: 119px;"><a href="https://lively-kernel.org/lively4/lively4-jens/src/client/poid.js" style="color: rgb(43, 84, 126);">poid.js</a></div></div><div class="lively-content" style="color: rgb(0, 0, 0); font-family: sans-serif; font-size: medium; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: 400; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; text-decoration-style: initial; text-decoration-color: initial; background-color: lightgray; border: 1px solid gray; position: absolute; left: 80px; top: -153.76px; height: 0px;"></div><div class="lively-content" style="color: rgb(0, 0, 0); font-family: sans-serif; font-size: medium; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: 400; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; text-decoration-style: initial; text-decoration-color: initial; background-color: lightgray; border: 1px solid gray; position: absolute; left: -757px; top: 642px; width: 66.4px; height: 68.8px;"><div class="lively-content" style="background-color: lightgray; border: 1px solid gray; position: relative; width: 72px; height: 87.2px; left: 36px; top: 63px;"></div></div><div id="DocumentGrid" class="document-grid" data-lively4-donotpersist="all" style="color: rgb(0, 0, 0); font-family: sans-serif; font-size: medium; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: 400; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; text-decoration-style: initial; text-decoration-color: initial; z-index: -200; pointer-events: none; width: 2170px; height: 1287px; position: absolute; left: -1276px; top: 259.2px;"><div data-lively4-donotpersist="all" class="document-grid" style="position: absolute; left: 1276px; top: -259.2px; background-color: rgba(250, 250, 240, 0.5); border: 0.5px solid rgb(50, 50, 50); width: 4000px; height: 2000px; pointer-events: none;"></div><div style="pointer-events: none; position: absolute; left: -24px; top: -159.2px;"></div></div><lively-hand data-lively4-donotpersist="all" style="position: absolute; display: block; z-index: 1000; pointer-events: none; color: rgb(0, 0, 0); font-family: sans-serif; font-size: medium; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: 400; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; text-decoration-style: initial; text-decoration-color: initial; visibility: hidden;"><div id="info" style="position: absolute; z-index: 1001; top: 0px; right: 10px;"></div><div id="content" style="position: absolute; top: 0px; left: 0px; width: 3px; height: 3px; background-color: rgba(10, 10, 10, 0.5); pointer-events: none;"></div></lively-hand><div class="lively-content" draggable="false" id="WorldMirror" data-lively-part-name="WorldMirror" data-lively-id="16084f73-2f76-4fd4-a187-d77a6017a2c1" style="color: rgb(0, 0, 0); font-family: sans-serif; font-size: medium; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: 400; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; text-decoration-style: initial; text-decoration-color: initial; position: absolute; width: 216.8px; height: 23.6px; left: -158.4px; top: 421.8px; user-select: none; z-index: 1000;"><div style="overflow: hidden; width: 832px; height: 685.6px; position: absolute; left: 0px; top: 0px; background: rgba(255, 255, 255, 0.4);"><div style="position: absolute; left: 158.4px; top: -421.8px;"><div style="border: 1px solid gray; background: rgba(0, 100, 0, 0.3); display: flex; align-items: center; justify-content: center; color: white; text-align: center; position: absolute; left: -73.6px; top: 632px; width: 889px; height: 523px;"><div>lively-window</div></div><div style="border: 1px solid gray; background: rgba(0, 100, 0, 0.3); display: flex; align-items: center; justify-content: center; color: white; text-align: center; position: absolute; left: 805.4px; top: 1145px; width: 10px; height: 10px;"><div>lively-resizer</div></div><div style="border: 1px solid gray; background: rgba(0, 100, 0, 0.3); display: flex; align-items: center; justify-content: center; color: white; text-align: center; position: absolute; left: -72.6px; top: 652.2px; width: 887px; height: 501.8px;"><div>lively-object-editor</div></div><div style="border: 1px solid gray; background: rgba(0, 100, 0, 0.3); display: flex; align-items: center; justify-content: center; color: white; text-align: center; position: absolute; left: -67.6px; top: 665.2px; width: 195.85px; height: 447.4px;"><div>lively-treeview</div></div><div style="border: 1px solid gray; background: rgba(0, 100, 0, 0.3); display: flex; align-items: center; justify-content: center; color: white; text-align: center; position: absolute; left: 128.25px; top: 665.2px; width: 681.15px; height: 447.4px;"><div>lively-code-mirror</div></div><div style="border: 1px solid gray; background: rgba(0, 100, 0, 0.3); display: flex; align-items: center; justify-content: center; color: white; text-align: center; position: absolute; left: -549.313px; top: 925.05px; width: 1123px; height: 813px;"><div>lively-window</div></div><div style="border: 1px solid gray; background: rgba(0, 100, 0, 0.3); display: flex; align-items: center; justify-content: center; color: white; text-align: center; position: absolute; left: 563.688px; top: 1728.05px; width: 10px; height: 10px;"><div>lively-resizer</div></div><div style="border: 1px solid gray; background: rgba(0, 100, 0, 0.3); display: flex; align-items: center; justify-content: center; color: white; text-align: center; position: absolute; left: -548.313px; top: 945.25px; width: 1122px; height: 791.8px;"><div>lively-container</div></div><div style="border: 1px solid gray; background: rgba(0, 100, 0, 0.3); display: flex; align-items: center; justify-content: center; color: white; text-align: center; position: absolute; left: -548.313px; top: 975.25px; width: 225px; height: 761.8px;"><div>lively-container-navbar</div></div><div style="border: 1px solid gray; background: rgba(0, 100, 0, 0.3); display: flex; align-items: center; justify-content: center; color: white; text-align: center; position: absolute; left: -328.313px; top: 970.25px; width: 10px; height: 771.8px;"><div>lively-separator</div></div><div style="border: 1px solid gray; background: rgba(0, 100, 0, 0.3); display: flex; align-items: center; justify-content: center; color: white; text-align: center; position: absolute; left: -1276px; top: 259.2px; width: 0px; height: 0px;"><div>lively-editor</div></div><div style="border: 1px solid gray; background: rgba(0, 100, 0, 0.3); display: flex; align-items: center; justify-content: center; color: white; text-align: center; position: absolute; left: -1276px; top: 259.2px; width: 0px; height: 0px;"><div>lively-version-control</div></div><div style="border: 1px solid gray; background: rgba(0, 100, 0, 0.3); display: flex; align-items: center; justify-content: center; color: white; text-align: center; position: absolute; left: -1276px; top: 259.2px; width: 0px; height: 0px;"><div>lively-code-mirror</div></div><div style="border: 1px solid gray; background: rgba(0, 100, 0, 0.3); display: flex; align-items: center; justify-content: center; color: white; text-align: center; position: absolute; left: -1263.25px; top: 810.513px; width: 650px; height: 400px;"><div>lively-window</div></div><div style="border: 1px solid gray; background: rgba(0, 100, 0, 0.3); display: flex; align-items: center; justify-content: center; color: white; text-align: center; position: absolute; left: -623.25px; top: 1200.51px; width: 10px; height: 10px;"><div>lively-resizer</div></div><div style="border: 1px solid gray; background: rgba(0, 100, 0, 0.3); display: flex; align-items: center; justify-content: center; color: white; text-align: center; position: absolute; left: -1262.25px; top: 830.713px; width: 648px; height: 378.8px;"><div>lively-code-mirror</div></div><div style="border: 1px solid gray; background: rgba(0, 100, 0, 0.3); display: flex; align-items: center; justify-content: center; color: white; text-align: center; position: absolute; left: 535.8px; top: 1269px; width: 244px; height: 50.8px;"><div>lively-notification</div></div><div style="border: 1px solid gray; background: rgba(0, 100, 0, 0.3); display: flex; align-items: center; justify-content: center; color: white; text-align: center; position: absolute; left: 530.8px; top: 1241.6px; width: 254px; height: 160.8px;"><div>lively-notification-list</div></div><div style="border: 1px solid gray; background: rgba(0, 100, 0, 0.3); display: flex; align-items: center; justify-content: center; color: white; text-align: center; position: absolute; left: 535.8px; top: 1256.6px; width: 244px; height: 63.2px;"><div>lively-notification</div></div><div style="border: 1px solid gray; background: rgba(0, 100, 0, 0.3); display: flex; align-items: center; justify-content: center; color: white; text-align: center; position: absolute; left: 535.8px; top: 1329.8px; width: 244px; height: 57.6px;"><div>lively-notification</div></div><div style="border: 1px solid gray; background: rgba(0, 100, 0, 0.3); display: flex; align-items: center; justify-content: center; color: white; text-align: center; position: absolute; left: 0px; top: 0px; width: 650px; height: 400px;"><div>lively-window</div></div><div style="border: 1px solid gray; background: rgba(0, 100, 0, 0.3); display: flex; align-items: center; justify-content: center; color: white; text-align: center; position: absolute; left: -974px; top: 577.4px; width: 648px; height: 378.8px;"><div>lively-sync</div></div><div style="border: 1px solid gray; background: rgba(0, 100, 0, 0.3); display: flex; align-items: center; justify-content: center; color: white; text-align: center; position: absolute; left: 0px; top: 0px; width: 602px; height: 174.4px;"><div>lively-dialog</div></div></div></div><input style="width: 300px; position: absolute; left: 0px; top: -20px; border: 1px solid gray;"><div style="background-color: gray; width: 10px; height: 10px; position: absolute; left: 832px; top: 685.6px;"></div></div><lively-notification-list style="position: fixed; bottom: 0px; right: 0px; z-index: 10000; color: rgb(0, 0, 0); font-family: sans-serif; font-size: medium; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: 400; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; text-decoration-style: initial; text-decoration-color: initial;"><div id="notifications" style="padding: 5px;"><lively-notification style="display: block; position: relative;"><div id="notification" style="position: relative; background-color: rgba(255, 255, 255, 0.8); border: 2px solid lightgray; margin: 10px; padding: 10px; width: 200px; opacity: 0.8;"><div id="closeButton" style="position: absolute; right: 0px; top: 0px; padding: 2px;">×</div><div id="title" style="color: black; font-size: 14px;">saved file</div><div id="message" style="color: black; font-size: 10px;">https://lively-kernel.org/lively4/lively4-jens/src/client/lively.js</div><div id="counter"></div></div></lively-notification><lively-notification style="display: block; position: relative;"><div id="notification" style="position: relative; background-color: rgba(255, 255, 255, 0.8); border: 2px solid lightgray; margin: 10px; padding: 10px; width: 200px; opacity: 0.8;"><div id="closeButton" style="position: absolute; right: 0px; top: 0px; padding: 2px;">×</div><div id="title" style="color: black; font-size: 14px;"></div><div id="message" style="color: black; font-size: 10px;">Module https://lively-kernel.org/lively4/lively4-jens/src/client/lively.js reloaded!</div><div id="counter"></div></div></lively-notification></div><lively-notification></lively-notification></lively-notification-list><lively-dialog style="position: fixed; z-index: 500; background-color: rgba(230, 230, 230, 0.8); min-width: 200px; min-height: 100px; width: 600px; border: 1px solid lightgray; border-radius: 10px; color: rgb(0, 0, 0); font-family: sans-serif; font-size: medium; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: 400; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; text-decoration-style: initial; text-decoration-color: initial; left: 684px; top: 456.3px;"><button id="close" style="background: none; border: none; float: right; vertical-align: top; color: gray; font-size: 20px;"><i class="fa fa-close" aria-hidden="true" style="display: inline-block; font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; line-height: 1; font-family: FontAwesome; font-size: inherit; text-rendering: auto; -webkit-font-smoothing: antialiased;"></i></button><div id="container"><div id="message" style="margin: 20px;">save element as:</div></div></lively-dialog></div><script data-name="addElements" type="lively4script">function addElements(elements) {
  if (!elements) return;
  
  var all = this.filterElements(elements)
  
  if (!this.elementMap) {
    this.elementMap = new WeakMap()
  }
  
  // this.label.innerHTML = " on " + all.size + " elements "
  all.forEach(ea => {
    if (ea === this || ea.isMetaNode) {
      return
    }
    
    var mirrorElement = this.elementMap.get(ea)
    
    if (!mirrorElement) {
      mirrorElement = document.createElement("div")
      mirrorElement.isMetaNode = true
      mirrorElement.style.border = "1px solid gray"
      mirrorElement.style.background = "rgba(0,100,0,0.3)"
      mirrorElement.style.display = "flex";
      mirrorElement.style.alignItems = "center";
      mirrorElement.style.justifyContent ="center";
      mirrorElement.target = ea
    
      if (all.length < 200) {
        mirrorElement.innerHTML = "<div>" + ea.localName + "</div>"
        mirrorElement.style.color = "white"
        mirrorElement.style.textAlign = "center"
      }

      mirrorElement.updatePosition = function() {
        var bounds = lively.getGlobalBounds(ea)
        lively.setGlobalPosition(mirrorElement, bounds.topLeft())
        lively.setExtent(mirrorElement, bounds.extent())      
      }
      mirrorElement.addEventListener("click", () => this.selectElement(ea))
      this.elementMap.set(ea, mirrorElement)
      lively.html.addContextStyleChangeListener(ea, mirrorElement.updatePosition)
    }    
    // lively.removeEventListener("x-ray", ea)    
    // lively.addEventListener("x-ray", ea, "context-style-changed", evt => {
    //   mirrorElement.updatePosition()
    // })
    // #TODO call removeContextStyleChangeListener(obj, cb) 
    
    
    // mirrorElement.style.pointerEvents = "none";
    this.world.appendChild(mirrorElement)
    mirrorElement.updatePosition()
  })
  
}</script><script data-name="livelyLoad" type="lively4script">function livelyLoad() {
  lively.sleep(1000).then(() => {
    this.mirrorWorld()
    lively.html.registerContextStyleObserver(document.body, "XRay")
    // lively.html.disconnectContextStyleObserver(document.body, "XRay")
  })
}</script></div>